# Тестовый сценарий для US-1: Тестирование функционала добавления преподавателей

**Цель:** Проверить корректность обработки CSV-файлов, валидации данных и ответов бота.

| № | Приоритет | Название | Предусловия | Тестовые данные | Шаги | Ожидаемый результат | Статус | Комментарий |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| 1 | High | Успешное добавление преподавателей из корректного CSV-файла | 1. Бот активен<br>2. Пользователь имеет права администратора | Файл `correct.csv`:<br>`id,full_name`<br>`1,Иванов Иван`<br>`2,Петрова Мария` | 1. Отправить команду `/add_teacher`<br>2. Прикрепить файл `correct.csv` | 1. Бот запрашивает файл<br>2. Сообщение: «Добавлено 2 преподавателя»<br>3. Данные появляются в БД | | |
| 2 | High | Обработка дубликатов ID в файле | 1. Бот активен<br>2. Пользователь - администратор | Файл `duplicate_ids.csv`:<br>`id,full_name`<br>`1,Иванов Иван`<br>`1,Петров Петр` | 1. Отправить `/add_teacher`<br>2. Прикрепить файл `duplicate_ids.csv` | Сообщение: «Ошибка: повторяющиеся ID»<br>Данные не добавлены в БД | | |
| 3 | High | Отсутствует столбец id | 1. Бот активен<br>2. Пользователь - администратор | Файл `no_id.csv`:<br>`full_name`<br>`Иванов Иван` | 1. Отправить `/add_teacher`<br>2. Прикрепить файл `no_id.csv` | Сообщение: «Ошибка: некорректный формат данных» | | |
| 4 | High | Отсутствует столбец full_name | 1. Бот активен<br>2. Пользователь - администратор | Файл `no_name.csv`:<br>`id`<br>`1` | 1. Отправить `/add_teacher`<br>2. Прикрепить файл `no_name.csv` | Сообщение: «Ошибка: некорректный формат данных» | | |
| 5 | High | Пустые значения в full_name | 1. Бот активен<br>2. Пользователь - администратор | Файл `empty_name.csv`:<br>`id,full_name`<br>`1,`<br>`2,Петрова Мария` | 1. Отправить `/add_teacher`<br>2. Прикрепить файл `empty_name.csv` | Сообщение: «Ошибка: некорректный формат данных» | | |
| 6 | High | Пустые значения в id | 1. Бот активен<br>2. Пользователь - администратор | Файл `empty_id.csv`:<br>`id,full_name`<br>`,Иванов Иван`<br>`2,Петрова Мария` | 1. Отправить `/add_teacher`<br>2. Прикрепить файл `empty_id.csv` | Сообщение: «Ошибка: некорректный формат данных» | | |
| 7 | High | Загрузка файла с неверным расширением | 1. Бот активен<br>2. Пользователь - администратор | Файл `teachers.xls` (Excel) | 1. Отправить `/add_teacher`<br>2. Прикрепить файл `teachers.xls` | Сообщение: «Ошибка: поддерживается только формат CSV» | | Проверить для .xls, .txt, .pdf |
| 8 | Medium | Загрузка пустого CSV-файла | 1. Бот активен<br>2. Пользователь - администратор | Пустой CSV-файл `empty.csv` | 1. Отправить `/add_teacher`<br>2. Прикрепить файл `empty.csv` | Сообщение: «Ошибка: некорректный формат данных» или «Файл пуст» | | |
| 9 | Medium | Обработка файла с дополнительными столбцами | 1. Бот активен<br>2. Пользователь - администратор | Файл `extra_columns.csv`:<br>`id,full_name,department`<br>`1,Иванов Иван,Математика` | 1. Отправить `/add_teacher`<br>2. Прикрепить файл `extra_columns.csv` | *Уточнить у аналитика:*<br>Вариант А: «Добавлено 1 преподаватель»<br>Вариант Б: «Ошибка: некорректный формат данных» | | Требуется уточнение требований |
| 10 | Medium | Спецсимволы в полях имени | 1. Бот активен<br>2. Пользователь - администратор | Файл `special_chars.csv`:<br>`id,full_name`<br>`1,Иванов-Петров Иван`<br>`2,Сидорова Анна (мл.)` | 1. Отправить `/add_teacher`<br>2. Прикрепить файл `special_chars.csv` | Сообщение об успешном добавлении, данные корректно сохраняются в БД | | |
| 11 | Low | Очень длинные значения в full_name | 1. Бот активен<br>2. Пользователь - администратор | CSV-файл с именем длиной 255 символов | 1. Отправить `/add_teacher`<br>2. Прикрепить тестовый файл | *Уточнить у аналитика:*<br>Успешное добавление или ошибка валидации | | Проверить ограничения БД |
| 12 | High | Обработка большого файла (500+ записей) | 1. Бот активен<br>2. Пользователь - администратор | CSV-файл `large.csv` с 600 корректными записями | 1. Отправить `/add_teacher`<br>2. Прикрепить файл `large.csv` | 1. Сообщение: «Пожалуйста, подождите, идёт обработка файла…»<br>2. Сообщение: «Добавлено 600 преподавателей»<br>3. Приемлемое время выполнения | | Проверить производительность |
| 13 | Medium | Повторная загрузка того же файла | 1. Бот активен<br>2. Преподаватели из файла уже добавлены в БД | CSV-файл `correct.csv` (из теста 1) | 1. Отправить `/add_teacher`<br>2. Прикрепить файл `correct.csv` | Сообщение: «Ошибка: повторяющиеся ID» | | Бот проверяет уникальность ID в БД |
| 14 | Medium | Отмена операции добавления | 1. Бот активен<br>2. Пользователь - администратор | - | 1. Отправить `/add_teacher`<br>2. Отправить `/cancel` до загрузки файла | Бот выходит из режима добавления, возвращает основное меню | | |
| 15 | Low | Проверка доступности добавленных преподавателей | 1. Преподаватели добавлены через тест 1 | - | 1. Использовать функционал студента (поиск/голосование) | Добавленные преподаватели отображаются и доступны для выбора | | Интеграционный тест |

## Примечания по использованию:

- **Статус:** Заполняется тестировщиком (✅ Pass / ❌ Fail / ⏸️ Blocked)
- **Приоритет:** High - критичный, Medium - важный, Low - дополнительный
- **Тестовые данные:** Все CSV файлы должны быть подготовлены заранее
- **Проверка БД:** Для тестов 1, 12, 15 требуется проверка базы данных
